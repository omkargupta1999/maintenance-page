apiVersion: networking.istio.io/v1beta1
kind: VirtualService
metadata:
  name: maintenance-override
  namespace: dev-istio-system
spec:
  hosts:
    - dev.epay.sbi
  gateways:
    - dev-istio-system/epay-dev-gateway
  http:
    - name: "force-all-to-maintenance"
      match:
        - uri:
            regex: ".*"  # Match absolutely every URI after .sbi/
      rewrite:
        uri: /maintenancepage/
      route:
        - destination:
            host: maintenance.dev-frontend.svc.cluster.local
            port:
              number: 8080
